<UserControl x:Class="StorageWatchUI.Views.TrendsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Trends - Historical Disk Usage" FontSize="24" FontWeight="Bold" 
                   Foreground="{DynamicResource PrimaryText}" Margin="0,0,0,20"/>

        <!-- Controls -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Drive:" VerticalAlignment="Center" Margin="0,0,10,0" 
                       Foreground="{DynamicResource PrimaryText}"/>
            <ComboBox ItemsSource="{Binding AvailableDrives}" 
                      SelectedItem="{Binding SelectedDrive}" 
                      Width="100" Margin="0,0,20,0"/>

            <TextBlock Text="Period:" VerticalAlignment="Center" Margin="0,0,10,0" 
                       Foreground="{DynamicResource PrimaryText}"/>
            <ComboBox SelectedValue="{Binding SelectedDaysBack}" Width="120">
                <ComboBoxItem Content="Last 7 days" Tag="7"/>
                <ComboBoxItem Content="Last 14 days" Tag="14"/>
                <ComboBoxItem Content="Last 30 days" Tag="30"/>
                <ComboBoxItem Content="Last 90 days" Tag="90"/>
            </ComboBox>

            <Button Content="Refresh" Command="{Binding RefreshCommand}" 
                    Margin="20,0,0,0" Padding="10,5"/>
        </StackPanel>

        <!-- Chart -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackground}" 
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1" 
                CornerRadius="5" 
                Padding="10">
            <lvc:CartesianChart Series="{Binding Series}"/>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="{DynamicResource StatusBarBackground}" 
                BorderThickness="0,1,0,0" BorderBrush="{DynamicResource BorderBrush}" 
                Padding="10" Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding StatusMessage}" 
                           Foreground="{DynamicResource SecondaryText}"/>
                <TextBlock Text=" | Loading..." 
                           Foreground="{DynamicResource SecondaryText}" 
                           Margin="10,0,0,0"
                           Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
